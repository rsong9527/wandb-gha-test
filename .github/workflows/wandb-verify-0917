# 文件名: .github/workflows/wandb-verify-0917.yml
name: W&B Verify Diagnostic

on:
  # 允许您在 GitHub Actions 页面手动触发这个 workflow
  workflow_dispatch:

jobs:
  verify-wandb-environment:
    # 指定这个任务在美国区域的 GitHub Actions runner 上运行
    runs-on: ubuntu-latest

    steps:
      # 第一步：设置 Python 环境
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9' # 您可以根据您的项目修改 Python 版本

      # 第二步：安装 W&B 库
      - name: Install W&B Library
        run: pip install wandb

      # 第三步：运行 W&B Verify 诊断命令
      - name: Run W&B Verify with Debug Logging
        # 在这里设置环境变量，然后运行命令
        env:
          WANDB_API_KEY: ${{ secrets.WANDB_API_KEY }}
          WANDB_DEBUG: true
        run: wandb verify
